# circuit

## 開発の流れ
RAY電装の開発は以下のような流れで行いました。
1. ブレッドボード上でのSTM32F303K8の動作試験
2. PCB基板上での書き込み試験(LED点灯プログラム)
3. PCB基板上でのprintfデバッグ
4. PCB基板上でのサーボモーターの動作試験
5. PCB基板上でのI2Cデバイスの動作試験(BNO055,BMP180)
6. PCB基板上でのUARTデバイスの動作試験(GPS,RM92A)  
各項目について、詳細な手順を以下に記載します。
### ブレッドボード上でのSTM32F303K8の動作試験
電装製作において最も重要なことは手を動かすことです。未知な要素が多いマイコンを扱う際は、早めに部品を発注して動作試験をしましょう。
筆者はまず[このサイト](https://yoshikiyo.com/2021/01/04/20210104/)を参考にSTM32の動作試験を行いました。実際に使用した部品を以下に記載します。
* [STM32F303K8](https://akizukidenshi.com/catalog/g/gI-10790/)
* [32ピンQFR変換基板](https://akizukidenshi.com/catalog/g/gP-09581/)
* [STLink](https://www.amazon.co.jp/QuiExact-%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0%E3%82%AD%E3%83%83%E3%83%88-%E3%82%A8%E3%83%9F%E3%83%A5%E3%83%AC%E3%83%BC%E3%82%BF%E3%83%87%E3%83%90%E3%83%83%E3%82%AC-%E3%82%B7%E3%83%9F%E3%83%A5%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3-%E3%83%87%E3%83%90%E3%83%83%E3%82%AC%E3%82%A8%E3%83%9F%E3%83%A5%E3%83%AC%E3%83%BC%E3%82%BF/dp/B0B5KLKDY2/ref=sr_1_1_sspa?keywords=st-link%2Fv2&qid=1698780781&sr=8-1-spons&sp_csd=d2lkZ2V0TmFtZT1zcF9hdGY&psc=1)

接続するピンさえ間違えなければ、サイトの手順に従うことでLEDの点灯プログラムの動作試験を完了させることができると思います。
マイコンボードと違いUSBインターフェースがないため、書き込みにはSTLinkと呼ばれる専用の書き込み装置を用いる必要があります。中華性の格安STLinkではなく、純正品を使用することをおすすめします。

### PCB基板上での書き込み試験(LED点灯プログラム)
上記のサイトをもとに、以下のような回路を設計しました。
![STM32試作基板](/NSE2023/STM32-devlopment/circuit/STM32prototype.png)